---
source: ../../../../skills/atdd-assistant/atdd-workflow.md
source_version: 1.0.0
translation_version: 1.0.0
last_synced: 2026-02-05
status: current
---

# ATDD 工作流程指南

**版本**: 1.0.0
**最後更新**: 2026-01-19

---

## ATDD 循環概覽

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ATDD 工作流程                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │ 🤝 研討會    │───▶│ 🧪 精煉      │───▶│ 💻 開發      │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│          │                                       │                          │
│          │                                       ▼                          │
│          │                               ┌──────────────┐                   │
│          │                               │ 🎬 展示      │                   │
│          │                               └──────────────┘                   │
│          │                                       │                          │
│          │            ┌──────────────┐           │                          │
│          └───────────▶│ ✅ 完成      │◀──────────┘                          │
│                       └──────────────┘                                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 階段 1：規格研討會

### 目的

協作定義「完成」的樣貌，包含具體的驗收標準。

### 時間

30-60 分鐘

### 參與者

- 產品負責人（必要）
- 開發人員（必要）
- QA/測試人員（必要）
- 利害關係人（選擇性）

### 議程

| 時間 | 活動 | 主持 |
|------|------|------|
| 0-5 分鐘 | 故事說明 | PO |
| 5-15 分鐘 | 澄清問題 | 全員 |
| 15-35 分鐘 | AC 定義 | 全員 |
| 35-45 分鐘 | 範圍外 | 全員 |
| 45-55 分鐘 | 技術備註 | Dev |
| 55-60 分鐘 | 總結 | 全員 |

### 研討會流程

```
┌─────────────────────────────────────────────────────────────────┐
│              規格研討會流程                                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 故事說明 (5 分鐘)                                            │
│     └─▶ PO 解釋用戶故事、商業價值、背景                          │
│                                                                 │
│  2. 澄清問題 (10 分鐘)                                           │
│     ├─▶ 商業：「價值是什麼？」「優先級？」                       │
│     ├─▶ Dev：「影響？」「依賴？」「效能？」                      │
│     └─▶ QA：「可能出什麼錯？」「邊界案例？」                     │
│                                                                 │
│  3. 驗收標準定義 (20 分鐘)                                       │
│     ├─▶ 定義 happy path AC                                      │
│     ├─▶ 定義錯誤/邊界案例 AC                                    │
│     └─▶ 使用 Given-When-Then 格式                               │
│                                                                 │
│  4. 範圍外 (10 分鐘)                                             │
│     └─▶ 明確列出不包含的內容                                    │
│                                                                 │
│  5. 技術備註 (5 分鐘)                                            │
│     └─▶ 實作提示、限制、依賴                                    │
│                                                                 │
│  6. 總結 (5 分鐘)                                                │
│     ├─▶ 審查所有 AC                                             │
│     ├─▶ 確認 PO 理解                                            │
│     └─▶ 安排精煉會議                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 各角色問題

| 角色 | 焦點 | 問題 |
|------|------|------|
| **商業** | What & Why | 商業價值是什麼？使用者是誰？這解決什麼問題？優先級？ |
| **開發** | How | 影響哪些系統？有依賴嗎？效能考量？現有資料影響？ |
| **測試** | What if | 可能出什麼錯？邊界案例是什麼？如何驗證成功？安全考量？ |

### 輸出範本

```markdown
## 用戶故事: [US-XXX] [標題]

**研討會日期**: [日期]
**參與者**: [姓名]

**身為** [角色]
**我想要** [功能]
**以便** [好處]

## 驗收標準

### AC-1: [Happy path 描述]
**Given** [前置條件]
**When** [動作]
**Then** [預期結果]

### AC-2: [錯誤情境]
**Given** [前置條件]
**When** [無效動作]
**Then** [錯誤處理]

### AC-3: [邊界案例]
**Given** [邊界條件]
**When** [動作]
**Then** [適當結果]

## 範圍外
- [功能 1 - 延後至未來 Sprint]
- [功能 2 - MVP 之外]

## 技術備註
- [限制 1]
- [依賴資訊]
- [效能需求]

## 開放問題
- [ ] [問題 1 - 指派給: @person]
- [ ] [問題 2 - 需要 PO 澄清]
```

### 檢查清單

```
□ 產品負責人出席
□ 開發人員出席
□ QA/測試人員出席
□ 用戶故事已說明商業價值
□ 所有澄清問題已回答（或記錄）
□ 驗收標準使用 Given-When-Then 格式
□ Happy path 已涵蓋
□ 錯誤情境已涵蓋
□ 邊界案例已涵蓋
□ 範圍外已明確記錄
□ 技術備註已新增
□ 所有參與者同意範圍
```

---

## 階段 2：精煉

### 目的

將驗收標準轉換為可執行、可自動化的測試。

### 時間

30-60 分鐘

### 參與者

- 開發人員（必要）
- QA/測試人員（必要）
- 產品負責人（簽核）

### 步驟

```
┌─────────────────────────────────────────────────────────────────┐
│              精煉流程                                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 審查驗收標準                                                 │
│     對於每個 AC：                                                │
│     □ 是否明確無歧義？                                          │
│     □ 可以自動化嗎？                                            │
│     □ 是否驗證商業價值？                                        │
│     → 精煉任何不清楚的標準                                      │
│                                                                 │
│  2. 選擇測試格式                                                 │
│     │                                                           │
│     ├─ Gherkin → Cucumber, SpecFlow, Behave                     │
│     ├─ Wiki 表格 → FitNesse, Slim                               │
│     ├─ 關鍵字 → Robot Framework                                 │
│     └─ 程式碼 → xUnit 使用描述性名稱                            │
│                                                                 │
│  3. 撰寫可執行測試                                               │
│     │                                                           │
│     ├─ 每個驗收標準一個測試                                     │
│     ├─ 包含 setup/teardown                                      │
│     └─ 確保測試獨立                                             │
│                                                                 │
│  4. PO 簽核                                                      │
│     │                                                           │
│     ├─ PO 審查測試規格                                          │
│     ├─ 確認測試代表需求                                         │
│     └─ 開發開始前簽核                                           │
│                                                                 │
│  5. 執行測試（應該失敗）                                         │
│     │                                                           │
│     └─ 所有測試初始失敗（RED 狀態）                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 測試格式比較

| 格式 | 工具範例 | 商業可讀性 | 最適合 |
|------|---------|----------|--------|
| **Gherkin** | Cucumber, SpecFlow | ★★★★★ | 行為情境 |
| **Wiki 表格** | FitNesse | ★★★★☆ | 資料驅動測試 |
| **關鍵字** | Robot Framework | ★★★★☆ | 複雜工作流程 |
| **程式碼** | xUnit, pytest | ★★☆☆☆ | 技術團隊 |

### Gherkin 範例

```gherkin
# 檔案: features/password-reset.feature
# 故事: US-123 - 密碼重設

@US-123
Feature: 密碼重設
  身為註冊使用者
  我想要透過電子郵件重設密碼
  以便我忘記密碼時能重新存取

  @AC-1 @happy-path
  Scenario: 請求密碼重設
    Given 我在登入頁面
    And 我有一個電子郵件為 "user@example.com" 的註冊帳號
    When 我點擊「忘記密碼」
    And 我輸入我的電子郵件 "user@example.com"
    Then 我應該看到「重設連結已寄至您的電子郵件」
    And 我應該在 5 分鐘內收到電子郵件

  @AC-2 @error-handling
  Scenario: 重設連結 24 小時後過期
    Given 我已請求密碼重設
    When 我在 24 小時後點擊重設連結
    Then 我應該看到「此連結已過期」
    And 我應該可以請求新的連結

  @AC-3 @security
  Scenario: 未註冊電子郵件顯示通用訊息
    Given 我在密碼重設頁面
    When 我輸入未註冊的電子郵件
    Then 我應該看到「重設連結已寄至您的電子郵件」
    But 實際上不應該寄出電子郵件
```

### 檢查清單

```
□ 所有 AC 已審查清晰度
□ 模糊的標準已澄清
□ 測試格式已選擇
□ 所有 AC 已撰寫可執行測試
□ 測試是獨立的
□ PO 已審查並簽核
□ 測試執行並失敗（RED）
```

---

## 階段 3：開發

### 目的

由驗收測試驅動，實作功能。

### 時間

可變（取決於複雜度）

### 參與者

- 開發人員（主要）
- QA/測試人員（支援）

### 開發流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        ATDD 開發流程                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   驗收測試（RED - 全部失敗）                                                 │
│        │                                                                    │
│        ▼                                                                    │
│   ┌─────────────────────────────────────────┐                               │
│   │ 對於每個驗收測試：                       │                               │
│   │                                         │                               │
│   │   1. 識別需要的元件                     │                               │
│   │        │                                │                               │
│   │        ▼                                │                               │
│   │   ┌─────────────────────────────┐       │                               │
│   │   │ TDD 循環（對於每個單元）     │       │                               │
│   │   │  🔴 撰寫失敗的單元測試      │       │                               │
│   │   │  🟢 實作最小程式碼          │       │                               │
│   │   │  🔵 重構                    │       │                               │
│   │   └─────────────┬───────────────┘       │                               │
│   │                 │                       │                               │
│   │                 ▼                       │                               │
│   │   執行驗收測試                          │                               │
│   │        │                                │                               │
│   │        ├─ 仍然失敗？→ 更多 TDD          │                               │
│   │        │                                │                               │
│   │        └─ 通過？→ 下一個 AT             │                               │
│   │                                         │                               │
│   └─────────────────────────────────────────┘                               │
│        │                                                                    │
│        ▼                                                                    │
│   所有驗收測試（GREEN - 全部通過）                                           │
│        │                                                                    │
│        ▼                                                                    │
│   重構（保持測試綠燈）                                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### ATDD + BDD + TDD 整合

```
層級               焦點                   參與者
─────              ─────                   ────────────
ATDD               驗收標準               PO + Dev + QA
  │                （什麼是完成？）
  │
  ▼
BDD                行為情境               Dev + QA + BA
  │                （如何運作？）
  │
  ▼
TDD                單元實作               開發人員
                   （怎麼實現？）
```

### 檢查清單

```
□ 驗收測試初始失敗（RED）
□ BDD 情境已撰寫
□ TDD 用於單元實作
□ 逐步進展被追蹤
□ 所有驗收測試通過（GREEN）
□ 程式碼重構且整潔
□ 程式碼已審查
□ 準備展示
```

---

## 階段 4：展示

### 目的

向利害關係人展示完成的功能並獲得正式驗收。

### 時間

15-30 分鐘

### 參與者

- 產品負責人（必要）
- 開發人員（必要）
- QA/測試人員（必要）
- 利害關係人（視需要）

### 展示結構

| 時間 | 活動 | 主持 |
|------|------|------|
| 0-1 分鐘 | 背景 | Dev |
| 1-3 分鐘 | 展示測試 | QA |
| 3-13 分鐘 | 功能展示 | Dev |
| 13-20 分鐘 | 回饋與問答 | PO |
| 20-25 分鐘 | 決策 | PO |

### 展示流程

```
┌─────────────────────────────────────────────────────────────────┐
│                        展示結構                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 背景 (1 分鐘)                                                │
│     ├─ 提醒利害關係人用戶故事                                   │
│     └─ 展示驗收標準                                             │
│                                                                 │
│  2. 展示測試 (2 分鐘)                                            │
│     ├─ 現場執行驗收測試                                         │
│     └─ 展示全部通過                                             │
│                                                                 │
│  3. 功能展示 (5-10 分鐘)                                         │
│     ├─ 逐一展示每個驗收標準                                     │
│     ├─ 展示運作中的功能                                         │
│     └─ 展示已測試的邊界案例                                     │
│                                                                 │
│  4. 回饋與問答 (5 分鐘)                                          │
│     ├─ 收集回饋                                                 │
│     ├─ 澄清任何問題                                             │
│     └─ 記錄任何新需求                                           │
│                                                                 │
│  5. 決策 (5 分鐘)                                                │
│     │                                                           │
│     ├─ ✅ 接受                                                  │
│     │     故事完成，準備合併                                    │
│     │                                                           │
│     ├─ 🔄 需要精煉                                              │
│     │     帶著新學習返回研討會                                  │
│     │                                                           │
│     └─ ❌ 未接受                                                │
│           識別差距，迭代                                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 檢查清單

```
□ 展示環境已準備
□ 測試資料就緒
□ 所有驗收測試通過
□ 利害關係人已通知並出席
□ 展示成功完成
□ PO 決策已記錄
□ 後續步驟已記錄
```

---

## 階段 5：完成

### 完成的定義

```
□ 所有驗收測試通過
□ 產品負責人已接受
□ 程式碼已審查並核准
□ 程式碼已合併至主分支
□ 文件已更新
□ 準備發布
```

### 驗收後

1. **合併程式碼**至主分支
2. **更新文件**（如需要）
3. **關閉故事**在追蹤系統中
4. **分享學習**給團隊
5. **規劃下一個故事**

---

## 相關資源

- [驗收標準撰寫指南](./acceptance-criteria-guide.md)
- [ATDD 核心標準](../../../../core/acceptance-test-driven-development.md)
- [BDD 工作流程](../bdd-assistant/bdd-workflow.md)
- [TDD 工作流程](../tdd-assistant/tdd-workflow.md)
