# .NET 專案結構 - AI 優化選項
# 父項: project-structure

id: dotnet
meta:
  parent: project-structure
  version: "1.0.0"
  description: .NET/C# 專案的標準目錄結構
  language: zh-TW

structure:
  template: |
    SolutionName/
    ├── src/
    │   ├── SolutionName.Api/           # Web API 專案
    │   │   ├── Controllers/
    │   │   ├── Middleware/
    │   │   ├── Program.cs
    │   │   └── appsettings.json
    │   ├── SolutionName.Core/          # 核心業務邏輯
    │   │   ├── Entities/
    │   │   ├── Interfaces/
    │   │   └── Services/
    │   ├── SolutionName.Infrastructure/ # 外部服務實作
    │   │   ├── Data/
    │   │   ├── Repositories/
    │   │   └── ExternalServices/
    │   └── SolutionName.Shared/        # 共用程式碼
    │       ├── DTOs/
    │       ├── Extensions/
    │       └── Utils/
    ├── tests/
    │   ├── SolutionName.UnitTests/
    │   ├── SolutionName.IntegrationTests/
    │   └── SolutionName.FunctionalTests/
    ├── docs/
    ├── scripts/
    ├── SolutionName.sln
    ├── .editorconfig
    ├── Directory.Build.props
    └── README.md

layers:
  - name: Api
    responsibility: HTTP 端點、中介軟體、DI 設定
    depends_on: [Core, Infrastructure]

  - name: Core
    responsibility: 業務邏輯、實體、介面
    depends_on: []

  - name: Infrastructure
    responsibility: 資料存取、外部服務
    depends_on: [Core]

  - name: Shared
    responsibility: 共用 DTO、擴充方法
    depends_on: []

conventions:
  naming:
    files: PascalCase.cs
    directories: PascalCase
    classes: PascalCase
    interfaces: IPascalCase
    methods: PascalCase
    private_fields: _camelCase
    constants: PascalCase

rules:
  - id: clean-architecture
    trigger: 組織專案時
    instruction: 遵循 Clean Architecture 原則（相依性向內）
    priority: required

  - id: interface-segregation
    trigger: 定義介面時
    instruction: 在 Core 定義介面，在 Infrastructure 實作
    priority: required

  - id: project-references
    trigger: 加入參考時
    instruction: Api → Infrastructure → Core，Shared 可被任何專案參考
    priority: required

project_files:
  directory_build_props: |
    <Project>
      <PropertyGroup>
        <TargetFramework>net8.0</TargetFramework>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
      </PropertyGroup>
    </Project>

tools:
  build: dotnet CLI, MSBuild
  testing:
    - xUnit（推薦）
    - NUnit
    - MSTest
  mocking:
    - Moq
    - NSubstitute
  orm:
    - Entity Framework Core
    - Dapper
