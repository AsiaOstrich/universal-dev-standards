# 自動化程式碼審查 - AI 優化選項
# 父項: code-review

id: automated-review
meta:
  parent: code-review
  version: "1.0.0"
  description: 自動化程式碼分析和審查工具
  language: zh-TW

best_for:
  - 及早發現常見問題
  - 強制執行程式碼標準
  - 減輕審查者負擔
  - CI/CD 整合
  - 大型程式碼庫

tool_categories:
  static_analysis:
    name: 靜態分析
    description: 不執行程式碼進行分析
    tools:
      - name: ESLint
        languages: [JavaScript, TypeScript]
        focus: 程式碼品質、風格
      - name: Pylint
        languages: [Python]
        focus: 程式碼品質、錯誤
      - name: SonarQube
        languages: [多語言]
        focus: 程式碼品質、安全性

  security_scanning:
    name: 安全掃描
    description: 尋找安全漏洞
    tools:
      - name: Snyk
        focus: 相依性漏洞
      - name: CodeQL
        focus: 語意程式碼分析
      - name: Semgrep
        focus: 自訂安全規則

  formatting:
    name: 格式化
    description: 程式碼風格強制
    tools:
      - name: Prettier
        languages: [JavaScript, TypeScript, CSS, HTML]
      - name: Black
        languages: [Python]
      - name: gofmt
        languages: [Go]

  type_checking:
    name: 型別檢查
    description: 型別安全驗證
    tools:
      - name: TypeScript
        languages: [TypeScript, JavaScript]
      - name: mypy
        languages: [Python]

  ai_review:
    name: AI 審查
    description: AI 驅動的程式碼審查
    tools:
      - name: GitHub Copilot
        description: AI 建議和審查
      - name: CodeRabbit
        description: AI PR 審查評論

rules:
  - id: fail-on-errors
    trigger: 自動檢查失敗時
    instruction: 在修復關鍵問題前阻止合併
    priority: required

  - id: warnings-as-suggestions
    trigger: 自動檢查警告時
    instruction: 將警告視為非阻擋性建議
    priority: recommended

  - id: config-in-repo
    trigger: 設定自動化時
    instruction: 將工具設定存放在儲存庫中
    priority: required

  - id: pre-commit-hooks
    trigger: 提交程式碼時
    instruction: 在提交前執行格式化和 linter
    priority: recommended

recommended_setup:
  minimum:
    - 主要語言的 Linter
    - 格式化工具（啟用自動修復）
    - 相依性漏洞掃描器

  recommended:
    - 所有最小工具
    - 型別檢查器（如適用）
    - 安全掃描器
    - 程式碼覆蓋率檢查

  comprehensive:
    - 所有推薦工具
    - AI 程式碼審查
    - 專案自訂規則
    - 指標追蹤

comparison_with_manual:
  columns: [面向, 自動化, 人工審查]
  rows:
    - [速度, 即時, 數小時/數天]
    - [一致性, 100%, 視情況]
    - [情境理解, 有限, 高]
    - [商業邏輯, 無法檢查, 可驗證]
    - [風格強制, 優秀, 不一致]
    - [基本安全, 良好, 可能遺漏]
