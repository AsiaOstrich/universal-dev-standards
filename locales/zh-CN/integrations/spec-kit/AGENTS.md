---
source: ../../../../integrations/spec-kit/AGENTS.md
source_version: 1.0.0
translation_version: 1.0.0
last_synced: 2026-01-13
status: current
---

# Spec Kit 指令

使用 Spec Kit 进行规格驱动开发的 AI 编码助手指令。

## 使用方式

将此文件复制到您的项目，或包含在 AI 助手的系统指令中。

---

## 使用 Spec Kit 进行规格驱动开发

当此项目启用 Spec Kit 时，您必须遵循**规格驱动开发（SDD）**方法论。

### 核心原则：规格优先，代码其次

**规则**：没有对应的已核准规格，不得进行任何功能性代码变更。

**例外情况**：
- 紧急修复（立即恢复服务，事后记录）
- 琐碎变更（错字、注释、格式）

---

## Spec Kit 指令

当 Spec Kit 可用时，优先使用这些指令：

| 指令 | 说明 |
|------|------|
| `/spec create <title>` | 创建新规格 |
| `/spec list` | 列出所有活跃规格 |
| `/spec show <id>` | 显示规格详情 |
| `/spec approve <id>` | 标记规格为已核准 |
| `/spec close <id>` | 关闭已完成规格 |
| `/spec archive <id>` | 归档规格 |

### 指令优先顺序

**规则**：始终优先使用 Spec Kit 指令，而非手动编辑文件。

**理由**：
- **一致性**：确保规格结构遵循 schema
- **可追溯性**：自动生成 ID 和链接
- **验证**：内建检查防止无效状态

---

## SDD 工作流程

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│     提案     │───▶│     审查     │───▶│     实现     │
└──────────────┘    └──────────────┘    └──────────────┘
                                               │
                                               ▼
                    ┌──────────────┐    ┌──────────────┐
                    │     归档     │◀───│     验证     │
                    └──────────────┘    └──────────────┘
```

### 工作流程阶段

| 阶段 | 说明 | 操作 |
|------|------|------|
| **提案** | 定义变更内容和原因 | `/spec create` |
| **审查** | 利益相关者核准 | `/spec approve` |
| **实现** | 执行已核准规格 | 代码变更 |
| **验证** | 确认实现符合规格 | 测试 |
| **归档** | 关闭并归档规格 | `/spec close` |

---

## 任何任务之前

**上下文检查清单**：
- [ ] 检查活跃规格：`/spec list`
- [ ] 变更前审查相关规格
- [ ] 确认无冲突规格
- [ ] 非琐碎变更需创建规格

**可跳过规格的情况**：
- 错误修复（恢复预期行为）
- 错字、格式、注释
- 依赖更新（非破坏性）
- 配置变更

---

## 规格文档模板

手动创建规格时，使用此结构：

```markdown
# [SPEC-ID] 功能标题

## 摘要
简述提议变更。

## 动机
为何需要此变更？解决什么问题？

## 详细设计
技术方案、受影响组件、数据流程。

## 验收标准
- [ ] 标准 1
- [ ] 标准 2

## 依赖项
列出对其他规格或外部系统的依赖。

## 风险
潜在风险和缓解策略。
```

---

## 与通用文档规范的集成

### Commit 消息

在 commit 消息中引用规格 ID：

```
feat(auth): 实现登录功能

实现 SPEC-001 登录功能，支持 OAuth2。

Refs: SPEC-001
```

### 代码审查

审查者应确认：
- [ ] 变更符合已核准规格
- [ ] 无超出规格的范围蔓延
- [ ] 规格验收标准已达成

---

## 最佳实践

### 应该做的
- 保持规格聚焦且原子化（每个规格一项变更）
- 包含清晰的验收标准
- 将规格链接到实现 PR
- 完成后归档规格

### 不应该做的
- 规格核准前开始编码
- 实现期间修改范围而不更新规格
- 让规格处于悬而未决状态（始终关闭或归档）
- 跳过验证步骤

---

## 相关规范

- [规格驱动开发](../../core/spec-driven-development.md) - SDD 方法论
- [Commit 消息指南](../../core/commit-message-guide.md) - Commit 惯例
- [代码签入规范](../../core/checkin-standards.md) - 签入要求

---

## 版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| 1.0.0 | 2025-12-30 | 初始 Spec Kit 集成 |

---

## 许可证

本文档以 [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/) 许可发布。
