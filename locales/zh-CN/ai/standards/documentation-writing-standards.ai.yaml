# 文件撰写标准 - AI 优化版
# 来源: core/documentation-writing-standards.md

id: documentation-writing-standards
meta:
  version: "1.0.1"
  updated: "2025-12-30"
  source: core/documentation-writing-standards.md
  description: 基于项目类型的文件需求
  language: zh-CN

project_types:
  new_project:
    description: 從零開始建立软体
    required:
      - README.md
      - ARCHITECTURE.md
      - DEPLOYMENT.md
      - CHANGELOG.md
    recommended:
      - API.md（如有对外 API）
      - DATABASE.md（如使用数据庫）
      - ADR/（记录重要决策）

  refactoring:
    description: 改善既有系统而不改变外部行为
    required:
      - README.md
      - ARCHITECTURE.md
      - API.md（如適用）
      - DATABASE.md（如適用）
      - DEPLOYMENT.md
      - MIGRATION.md
      - ADR/
      - CHANGELOG.md
    key_points:
      - MIGRATION.md 必須包含回滾计画
      - ADR 必須记录为何重構及为何选择此方法

  migration:
    description: 將系统迁移到另一个環境/平台
    required:
      - README.md
      - ARCHITECTURE.md
      - API.md
      - DATABASE.md
      - DEPLOYMENT.md
      - MIGRATION.md
      - ADR/
      - CHANGELOG.md
    key_points:
      - MIGRATION.md 是核心文件
      - 必須包含数据迁移验证
      - 必須包含回滾计画
      - 必須包含集成夥伴通知

  maintenance:
    description: 日常維護、bug 修正、小幅功能增強
    required:
      - README.md
      - CHANGELOG.md
    recommended:
      - 根据变更範圍更新其他文件

document_categories:
  architecture:
    file: ARCHITECTURE.md
    required_sections:
      - 系统概覽（目的、範圍、主要功能）
      - 架構图（Mermaid 或 ASCII）
      - 模組说明（職責、相依性）
      - 技術棧（框架、语言、版本）
      - 数据流（主要业务流程）
    recommended_sections:
      - 部署架構
      - 设计决策（或連結到 ADR）

  api:
    file: API.md
    required_sections:
      - API 概覽（版本、基礎 URL、认证）
      - 认证（Token 取得、過期）
      - 端点列表
      - 端点規格（请求/响应格式）
      - 错误码參考
    recommended_sections:
      - 程序码範例
      - 速率限制

  database:
    file: DATABASE.md
    required_sections:
      - 数据庫概覽（类型、版本、連线）
      - ER 图
      - 数据表列表
      - 数据表規格（欄位定義）
      - 索引文件
      - 迁移脚本
    recommended_sections:
      - 备份策略

  deployment:
    file: DEPLOYMENT.md
    required_sections:
      - 環境需求
      - 安裝步骤
      - 设置
      - 验证
      - 故障排除
    recommended_sections:
      - 監控
      - 擴展指南

  migration:
    file: MIGRATION.md
    required_sections:
      - 迁移概覽（目標、範圍、时程）
      - 先决条件
      - 迁移步骤
      - 验证清单
      - 回滾计画
      - 向後相容性
    recommended_sections:
      - 集成夥伴通知

  adr:
    directory: docs/ADR/
    naming: "NNN-kebab-case-title.md"
    required_sections:
      - 標題
      - 状态（proposed/accepted/deprecated/superseded）
      - 背景
      - 决策
      - 影響
    recommended_sections:
      - 考慮的替代方案

rules:
  - id: project-type-docs
    trigger: 開始项目时
    instruction: 識别项目类型并建立必要文件
    priority: required

  - id: sync-updates
    trigger: 变更程序码时
    instruction: 程序码变更时更新文件
    priority: required

  - id: version-marking
    trigger: 建立文件时
    instruction: 在頂部標记版本和更新日期
    priority: required

  - id: review-inclusion
    trigger: 提交程序码审查时
    instruction: 在程序码审查中包含文件变更
    priority: required

  - id: periodic-review
    trigger: 每季
    instruction: 审查文件是否過时
    priority: recommended

quality_standards:
  format:
    language: 英文
    encoding: UTF-8
    line_length: "≤120 字元"
    diagrams: 優先使用 Mermaid，其次 ASCII Art
    links: 內部連結使用相对路徑

  review_checklist:
    - 必要區段完整
    - 無過时或不正确的信息
    - 所有連結有效
    - 範例可执行/正确
    - 格式遵循标准

quick_reference:
  requirements_matrix:
    columns: [文件, 新项目, 重構, 迁移, 維護]
    rows:
      - [README.md, 必要, 必要, 必要, 必要]
      - [ARCHITECTURE.md, 必要, 必要, 必要, 建议]
      - [API.md, 如適用, 必要, 必要, 建议]
      - [DATABASE.md, 如適用, 必要, 必要, 建议]
      - [DEPLOYMENT.md, 必要, 必要, 必要, 建议]
      - [MIGRATION.md, 不需要, 必要, 必要, 不需要]
      - [ADR/, 建议, 必要, 必要, 如適用]
      - [CHANGELOG.md, 必要, 必要, 必要, 必要]
