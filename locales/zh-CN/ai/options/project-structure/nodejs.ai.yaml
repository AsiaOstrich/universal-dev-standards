# Node.js 项目结构 - AI 优化选项
# 父项: project-structure

id: nodejs
meta:
  parent: project-structure
  version: "1.0.0"
  description: Node.js/TypeScript 项目的标准目录结构
  language: zh-CN

structure:
  template: |
    project-root/
    ├── src/
    │   ├── index.ts              # 应用程序进入点
    │   ├── app.ts                # Express/Fastify 应用程序设置
    │   ├── config/               # 设置檔
    │   │   ├── index.ts
    │   │   └── database.ts
    │   ├── modules/              # 功能模組（按功能組織）
    │   │   ├── users/
    │   │   │   ├── user.model.ts
    │   │   │   ├── user.service.ts
    │   │   │   ├── user.controller.ts
    │   │   │   ├── user.routes.ts
    │   │   │   └── user.test.ts
    │   │   └── products/
    │   ├── shared/               # 共用工具和类型
    │   │   ├── middleware/
    │   │   ├── utils/
    │   │   └── types/
    │   └── infrastructure/       # 外部服务集成
    │       ├── database/
    │       └── cache/
    ├── tests/                    # 集成/E2E 测试
    │   ├── integration/
    │   └── e2e/
    ├── scripts/                  # 建置/部署脚本
    ├── docs/                     # 文件
    ├── package.json
    ├── tsconfig.json
    ├── .env.example
    └── README.md

conventions:
  naming:
    files: kebab-case.ts
    directories: kebab-case
    classes: PascalCase
    functions: camelCase
    constants: UPPER_SNAKE_CASE

  file_suffixes:
    - ".model.ts"
    - ".service.ts"
    - ".controller.ts"
    - ".routes.ts"
    - ".test.ts"
    - ".dto.ts"
    - ".middleware.ts"

rules:
  - id: feature-folders
    trigger: 組織原始码时
    instruction: 使用功能数据夾而非技術数据夾
    priority: required
    examples:
      good: |
        src/modules/users/
          user.model.ts
          user.service.ts
      bad: |
        src/models/user.ts
        src/services/user.ts

  - id: index-exports
    trigger: 建立模組时
    instruction: 使用 index.ts 匯出公開 API
    priority: recommended

  - id: colocation
    trigger: 放置测试时
    instruction: 单元测试与原始码放一起
    priority: recommended

package_json:
  required_scripts:
    - "start": 执行应用程序
    - "dev": 开发模式（熱重载）
    - "build": 编譯 TypeScript
    - "test": 执行测试
    - "lint": 执行 linter

example_module: |
  // src/modules/users/index.ts
  export { User } from './user.model';
  export { UserService } from './user.service';
  export { userRoutes } from './user.routes';

  // 使用方式
  import { User, UserService } from '@/modules/users';
