# Swift 项目结构 - AI 优化选项
# 父层: project-structure

id: swift
meta:
  parent: project-structure
  version: "1.0.0"
  description: Swift 项目慣例

structure:
  spm_library: |
    project-root/
    ├── Sources/
    │   └── PackageName/
    │       ├── PackageName.swift
    │       ├── Models/
    │       ├── Services/
    │       └── Utilities/
    ├── Tests/
    │   └── PackageNameTests/
    │       └── PackageNameTests.swift
    ├── Package.swift
    └── README.md

  spm_executable: |
    project-root/
    ├── Sources/
    │   ├── AppName/
    │   │   └── main.swift
    │   └── AppNameCore/
    │       └── Core.swift
    ├── Tests/
    │   └── AppNameTests/
    ├── Package.swift
    └── README.md

  ios_app: |
    project-root/
    ├── AppName/
    │   ├── App/
    │   │   ├── AppNameApp.swift
    │   │   └── ContentView.swift
    │   ├── Features/
    │   │   ├── Home/
    │   │   │   ├── HomeView.swift
    │   │   │   └── HomeViewModel.swift
    │   │   └── Settings/
    │   ├── Core/
    │   │   ├── Models/
    │   │   ├── Services/
    │   │   └── Utilities/
    │   ├── Resources/
    │   │   ├── Assets.xcassets
    │   │   └── Localizable.strings
    │   └── Info.plist
    ├── AppNameTests/
    ├── AppNameUITests/
    ├── AppName.xcodeproj
    └── README.md

  vapor: |
    project-root/
    ├── Sources/
    │   ├── App/
    │   │   ├── configure.swift
    │   │   ├── routes.swift
    │   │   ├── Controllers/
    │   │   ├── Models/
    │   │   └── Migrations/
    │   └── Run/
    │       └── main.swift
    ├── Tests/
    │   └── AppTests/
    ├── Resources/
    │   └── Views/
    ├── Public/
    ├── Package.swift
    └── docker-compose.yml

config_files:
  - file: Package.swift
    purpose: Swift Package Manager 设置檔
    required: true（SPM 项目）

  - file: "*.xcodeproj"
    purpose: Xcode 项目
    required: true（Xcode 项目）

  - file: "*.xcworkspace"
    purpose: Xcode 工作區
    required: false

  - file: ".swiftlint.yml"
    purpose: SwiftLint 设置
    required: false

  - file: ".swift-version"
    purpose: Swift 版本
    required: false

gitignore:
  - ".build/"
  - ".swiftpm/"
  - "*.xcodeproj/xcuserdata/"
  - "*.xcworkspace/xcuserdata/"
  - DerivedData/
  - ".DS_Store"
  - Pods/
  - Carthage/

rules:
  - id: feature-folders
    trigger: 組織 iOS 功能
    instruction: 按功能分組，每个包含 View、ViewModel 和 Models
    priority: recommended

  - id: spm-targets
    trigger: 組織 SPM 套件
    instruction: 將程序庫和可执行檔分開到不同的目標
    priority: recommended

  - id: protocol-oriented
    trigger: 设计 API
    instruction: 使用協定进行抽象和相依性注入
    priority: recommended

  - id: test-naming
    trigger: 命名测试
    instruction: "使用 test_methodName_condition_expectedResult 格式"
    priority: recommended

  - id: access-control
    trigger: 定義可見性
    instruction: 使用最小存取等级（预设 internal，API 使用 public）
    priority: required

tools:
  build: [Swift Package Manager, Xcode, xcodebuild]
  test_runner: [XCTest, Quick/Nimble]
  linter: [SwiftLint, SwiftFormat]
  formatter: [SwiftFormat, swift-format]
  package_manager: [Swift Package Manager, CocoaPods, Carthage]
  documentation: [DocC, Jazzy]
