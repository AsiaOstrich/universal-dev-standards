---
source: ../../../core/spec-driven-development.md
source_version: 1.3.0
translation_version: 1.3.0
last_synced: 2026-01-19
status: current
---

# 规格驱动开发 (SDD) 标准

**版本**: 1.3.0
**最后更新**: 2026-01-19
**适用范围**: 所有采用规格驱动开发的专案

> **语言**: [English](../../../core/spec-driven-development.md) | [繁体中文](../locales/zh-TW/core/spec-driven-development.md)

---

## 目的

本标准定义规格驱动开发 (SDD) 的原则与工作流程，确保变更在实作前已经过规划、记录并透过规格核准。

**主要效益**:
- 减少利害关系人与开发者之间的沟通误解
- 为所有变更提供清晰的审计轨迹
- 新成员更容易上手

---

## SDD 工作流程

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│     提案     │───▶│     审查     │───▶│     实作     │
└──────────────┘    └──────────────┘    └──────────────┘
                                               │
                                               ▼
                    ┌──────────────┐    ┌──────────────┐
                    │     归档     │◀───│     验证     │
                    └──────────────┘    └──────────────┘
```

### 工作流程阶段

| 阶段 | 说明 | 产出物 |
|------|------|--------|
| **提案** | 定义变更内容与原因 | `proposal.md` |
| **审查** | 利害关系人核准 | 审查意见、核准纪录 |
| **实作** | 执行已核准的规格 | 程序码、测试、文件 |
| **验证** | 确认实作符合规格 | 测试结果、审查 |
| **归档** | 关闭并归档规格 | 已归档的规格与 commits/PRs 连结 |

---

## 核心原则

### 1. SDD 工具命令优先

**规则**: 当专案集成了 SDD 工具（如 OpenSpec, Spec Kit 等）且该工具提供特定命令（例如 `/openspec` 或 `/spec` 等斜线命令）时，AI 助手**必须优先使用这些命令**，而非直接手动编辑档案。

**理由**:
- **一致性**: 工具确保规格结构遵循严格的架构。
- **可追溯性**: 命令通常会自动处理日志、ID 和连结。
- **安全性**: 工具可能有内建验证以防止无效状态。

**范例**:
- ✅ 使用 `/openspec proposal "新增登入"` 取代手动建立 `changes/add-login/proposal.md`。

---

### 2. 方法论优于工具

**规则**: SDD 是一种方法论，不绑定於单一工具。虽然 OpenSpec 是常见的实作，但本标准适用于任何 SDD 工具（例如 Spec Kit）。

**指引**:
- **通用流程**: 提案 -> 审查 -> 实作 -> 验证 -> 归档。
- **工具适应**: 适应工作区中启用之 SDD 工具的特定命令与模式。

---

### 3. 先规格，后程序码

**规则**: 在没有经核准的规格或变更提案的情况下，不得进行功能性的程序码变更。

**例外情况**:
- 关键热修复（立即恢复服务，随后补文件）。
- 琐碎变更（错字、注解、格式调整）。

---

## 规格文件范本

### 提案范本

```markdown
# [SPEC-ID] 功能标题

## 摘要
简述提议的变更。

## 动机
为何需要此变更？解决什么问题？

## 详细设计
技术方法、影响的元件、资料流程。

## 验收条件
- [ ] 条件 1
- [ ] 条件 2

## 相依性
列出对其他规格或外部系统的相依性。

## 风险
潜在风险及缓解策略。
```

---

## 与其他标准集成

### 与 Commit 讯息指南集成

实作已核准的规格时，在 commit 讯息中引用规格 ID：

```
feat(auth): implement login feature

Implements SPEC-001 login functionality with OAuth2 support.

Refs: SPEC-001
```

### 与签入标准集成

在为规格签入程序码前：

1. ✅ 规格已核准
2. ✅ 实作符合规格
3. ✅ 测试涵盖验收条件
4. ✅ PR 中引用规格 ID

### 与程序码审查清单集成

审查者应验证：

- [ ] 变更符合已核准的规格
- [ ] 无超出规格范围的变更
- [ ] 规格验收条件已达成

---

## 常见 SDD 工具

| 工具 | 说明 | 命令范例 |
|------|------|----------|
| **OpenSpec** | 规格管理 | `/openspec proposal`, `/openspec approve` |
| **Spec Kit** | 轻量级规格追踪 | `/spec create`, `/spec close` |
| **手动** | 无工具，基于档案 | 手动建立 `specs/SPEC-XXX.md` |

---

## 最佳实践

### 应该做的

- ✅ 保持规格专注且原子化（每个规格一个变更）
- ✅ 包含明确的验收条件
- ✅ 将规格连结到实作 PR
- ✅ 完成后归档规格

### 不应该做的

- ❌ 在规格核准前开始编码
- ❌ 实作期间修改范围而不更新规格
- ❌ 让规格处于悬而未决状态（始终关闭或归档）
- ❌ 跳过验证步骤

---

## 与反向工程集成

### 概述

对于没有规格的现有程序码库，使用[反向工程标准](reverse-engineering-standards.md)来生成与 SDD 兼容的提案草稿。

### 反向工程 → SDD 流水线

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    反向工程 → SDD 流水线                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   现有程序码                                                             │
│        │                                                                │
│        ▼                                                                │
│   ┌────────────────────────────────────────────────────────────┐       │
│   │ /reverse-spec                                               │       │
│   │   • 程序码扫描 → 技术清单 [已确认]                            │       │
│   │   • 测试分析 → 验收条件 [已确认/推论]                         │       │
│   │   • 缺口识别 → [未知] 项目                                   │       │
│   └────────────────────────────────────────────────────────────┘       │
│        │                                                                │
│        ▼                                                                │
│   草拟规格（反向工程）                                                   │
│        │                                                                │
│        ▼                                                                │
│   ┌────────────────────────────────────────────────────────────┐       │
│   │ SDD 审查流程                                                 │       │
│   │   • 人类填写 [未知] 区块（动机、风险）                         │       │
│   │   • 利害关系人验证 [推论] 项目                                │       │
│   │   • 正式核准                                                 │       │
│   └────────────────────────────────────────────────────────────┘       │
│        │                                                                │
│        ▼                                                                │
│   已核准规格 → 继续正常 SDD 工作流程                                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 反向工程规格的要求

当规格透过反向工程生成时：

1. **标记状态**：在元资料中包含 `状态: 草稿（反向工程）`
2. **填写未知**：所有 `[未知]` 区块必须由人类在核准前填写
3. **验证推论**：所有 `[推论]` 项目必须经过审查和确认
4. **标准审查**：在实作前遵循正常 SDD 审查流程
5. **来源引用**：维护 file:line 参考以确保可追溯性

### 何时使用反向工程

| 情境 | 做法 |
|------|------|
| 旧系统现代化 | 从反向工程开始 |
| 记录未文件化的程序码 | 从程序码生成规格 |
| 新成员入职 | 提取规格进行知识转移 |
| 重构前的文件化 | 在重大变更前建立规格 |

### 相关命令

| 命令 | 用途 |
|------|------|
| `/reverse-spec` | 从现有程序码生成 SDD 规格 |
| `/reverse-bdd` | 将验收条件转换为 Gherkin 情境 |
| `/reverse-tdd` | 分析 BDD 情境的测试覆盖 |

---

## 相关标准

- [反向工程标准](reverse-engineering-standards.md) - 程序码转规格转换
- [测试驱动开发](test-driven-development.md) - TDD 工作流程与 SDD 集成
- [行为驱动开发](behavior-driven-development.md) - BDD 工作流程与 Given-When-Then 情境
- [验收测试驱动开发](acceptance-test-driven-development.md) - ATDD 工作流程与商业验收
- [测试标准](testing-standards.md) - 测试框架与最佳实践（或使用 `/testing-guide` 技能）
- [测试完整性维度](test-completeness-dimensions.md) - 7 维度测试覆盖
- [Commit 讯息指南](../../../core/commit-message-guide.md) - Commit 讯息规范
- [程序码签入标准](../../../core/checkin-standards.md) - 程序码签入标准
- [程序码审查清单](../../../core/code-review-checklist.md) - 程序码审查清单
- [文件结构标准](../../../core/documentation-structure.md) - 文件结构标准

---

## 版本历史

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| 1.3.0 | 2026-01-19 | 新增：与反向工程集成章节、相关命令 |
| 1.2.0 | 2026-01-05 | 新增：IEEE 830-1998 和 SWEBOK v4.0 第 1 章（软体需求）至参考资料 |
| 1.1.0 | 2025-12-24 | 新增：工作流程图、规格范本、集成指南、最佳实践、相关标准、授权 |
| 1.0.0 | 2025-12-23 | 初始 SDD 标准定义 |

---

## 参考资料

- [OpenSpec Documentation](https://github.com/openspec)
- [Design Documents Best Practices](https://www.industrialempathy.com/posts/design-docs-at-google/)
- [ADR (Architecture Decision Records)](https://adr.github.io/)
- [IEEE 830-1998 - 软体需求规格](https://standards.ieee.org/ieee/830/1222/) - 需求文件标准
- [SWEBOK v4.0 - 第 1 章：软体需求](https://www.computer.org/education/bodies-of-knowledge/software-engineering) - IEEE Computer Society

---

## 授权

本标准以 [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/) 授权发布。
