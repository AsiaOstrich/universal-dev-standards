---
source: ../../../templates/reverse-spec-template.md
source_version: 1.0.0
translation_version: 1.0.0
last_synced: 2026-01-19
status: current
---

# [SPEC-XXX] [功能名称]（反向工程）

**版本**: 1.0.0
**最后更新**: 2026-01-19

> ⚠️ **此规格由现有代码反向工程而来**
>
> - **分析日期**: YYYY-MM-DD
> - **分析路径**: `path/to/code`
> - **分析者**: [AI/人员名称]
>
> 标记为 `[未知]` 的区块需要人类确认后，此规格才算完成。

---

## 人类审查清单

在认为此规格完成之前，请验证：

### 准确性
- [ ] 所有 `[已确认]` 项目已对照实际代码验证
- [ ] 来源引用（file:line）正确
- [ ] 没有捏造的 API、设定或行为

### 推断验证
- [ ] 所有 `[推断]` 项目已审查准确性
- [ ] 不正确的推断已更正或移除
- [ ] 推断的推理合理

### 必要人类输入
- [ ] `动机` 区块已完成（为什么此功能存在）
- [ ] `风险` 区块已完成（潜在故障模式）
- [ ] `范围外` 区块已验证（刻意排除的内容）
- [ ] `用户故事` / 商业背景已新增

### 最终签核
- [ ] 原始开发者已审查（如果可用）
- [ ] 产品负责人已核准商业背景
- [ ] 所有 `[未知]` 标签已解决或确认

---

## 摘要

[已确认] 代码功能的简要描述。

- [来源: 代码] `primary_file.ts:start-end`

<!-- 范例：
[已确认] 此模块透过 JWT 令牌提供用户认证，支援登入、登出和令牌更新操作。

- [来源: 代码] src/controllers/AuthController.ts:1-150
- [来源: 代码] src/services/AuthService.ts:1-200
-->

---

## 动机

[未知] **需要人类输入**

回答这些问题：

1. **为什么要建立此功能？**
   <!-- 它解决什么问题？商业驱动力是什么？ -->

2. **谁请求了此功能？**
   <!-- 产品负责人、客户、内部团队？ -->

3. **它解决什么用户问题？**
   <!-- 用户痛点、工作流程改善 -->

4. **原始时程/背景是什么？**
   <!-- 何时建立？有任何相关背景吗？ -->

---

## 用户故事

[未知] **需要人类输入**

```
身为 [用户类型]，
我想要 [动作/功能]，
以便 [效益/价值]。
```

<!-- 范例：
身为已注册的用户，
我想要用我的电子邮件和密码登入，
以便我可以存取我的个人仪表板和数据。
-->

---

## 详细设计

### 架构概览

[已确认/推断] 从代码提取的高层级架构。

```
┌─────────────────────────────────────────────────────────────┐
│                        组件图                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [描述主要组件及其关系]                                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

- [来源: 代码] `src/architecture/` 或从 imports 推断

### 组件详情

#### 组件 1: [名称]

[已确认] 组件职责描述。

- **位置**: `path/to/component`
- **相依性**: 相依性清单
- **关键方法**:
  - `methodName()` - 描述
  - `anotherMethod()` - 描述

- [来源: 代码] `file.ts:lines`

#### 组件 2: [名称]

[已确认/推断] 描述。

- [来源: 代码] `file.ts:lines`

### 数据模型

#### 模型: [实体名称]

[已确认] 数据结构定义。

| 栏位 | 类型 | 必要 | 描述 |
|------|------|------|------|
| id | string | 是 | 主要识别码 |
| field1 | type | 是/否 | [已确认] 描述 |
| field2 | type | 是/否 | [推断] 描述 |

- [来源: 代码] `src/models/EntityName.ts:lines`

### API / 接口

#### 端点/方法 1

[已确认] `METHOD /path/to/endpoint`

**参数**:
| 名称 | 位置 | 类型 | 必要 | 描述 |
|------|------|------|------|------|
| param1 | path/query/body | type | 是/否 | 描述 |

**请求 Body**（如适用）:
```json
{
  "field": "value"
}
```

**回应**:
```json
{
  "result": "value"
}
```

**错误代码**:
| 代码 | 描述 |
|------|------|
| 400 | [推断] 错误请求 |
| 401 | [已确认] 未授权 |

- [来源: 代码] `src/controllers/Controller.ts:lines`

### 设定

[已确认] 从代码提取的设定。

| 设定 | 预设值 | 描述 | 来源 |
|------|--------|------|------|
| SETTING_1 | value | 描述 | [来源: 代码] config.ts:5 |
| SETTING_2 | value | 描述 | [来源: 代码] .env.example:10 |

---

## 验收标准

### 从测试提取

[推断] 从测试案例推导的验收标准：

#### 功能区域 1

- [ ] [推断] 从 `test_should_do_something` 的标准（test_file.ts:10）
- [ ] [推断] 从 `test_should_handle_error` 的标准（test_file.ts:25）

#### 功能区域 2

- [ ] [推断] 从测试分析的标准

- [来源: 代码] `src/tests/feature.test.ts`

### 覆盖率缺口

[未知] 以下区域缺乏测试覆盖率：

| 区域 | 风险等级 | 建议 |
|------|----------|------|
| 错误处理 | 🟡 中 | 修改前新增测试 |
| 边界案例 | 🔴 高 | 需要文档化 |

---

## 相依性

### 外部相依性

[已确认] 来自 package.json/requirements.txt 的相依性：

| 套件 | 版本 | 用途 |
|------|------|------|
| package1 | ^1.0.0 | 描述 |
| package2 | ^2.0.0 | 描述 |

- [来源: 代码] `package.json:lines`

### 内部相依性

[已确认] 内部模块相依性：

| 模块 | 相依于 | 类型 |
|------|--------|------|
| AuthService | UserRepository | 执行时期 |
| UserController | AuthService, UserService | 执行时期 |

---

## 风险

[未知] **需要人类输入**

### 技术风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|---------|
| <!-- 新增技术风险 --> | 低/中/高 | 低/中/高 | <!-- 缓解策略 --> |

### 商业风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|---------|
| <!-- 新增商业风险 --> | 低/中/高 | 低/中/高 | <!-- 缓解策略 --> |

### 已知问题 / 技术债

[未知] 记录分析期间发现的任何已知问题：

| 问题 | 严重性 | 备注 |
|------|--------|------|
| <!-- 新增问题 --> | 低/中/高 | <!-- 额外背景 --> |

---

## 范围外

[未知] **需要人类输入**

此功能刻意不包含什么？

- [ ] <!-- 项目 1 - 这是刻意排除的吗？ -->
- [ ] <!-- 项目 2 -->

---

## 历史背景

[未知] **需要人类输入**

### 设计决策

| 决策 | 理由 | 日期 | 决策者 |
|------|------|------|--------|
| <!-- 决定了什么 --> | <!-- 为什么 --> | <!-- 何时 --> | <!-- 谁 --> |

### 权衡取舍

| 权衡 | 选择的选项 | 替代方案 | 原因 |
|------|-----------|---------|------|
| <!-- 权衡描述 --> | <!-- 选择了什么 --> | <!-- 拒绝了什么 --> | <!-- 为什么 --> |

---

## 相关资源

### 代码参考

| 资源 | 路径 | 描述 |
|------|------|------|
| 主要实作 | `src/path/to/main` | 主要代码位置 |
| 测试 | `src/tests/path` | 测试文件 |
| 设定 | `src/config/path` | 设定文件 |

### 文档

[未知] 现有文档（如果有）：

- [ ] README: `path/to/readme`（存在/缺失）
- [ ] API 文档: `path/to/docs`（存在/缺失）
- [ ] 架构: `path/to/arch`（存在/缺失）

### 相关规格

- [ ] [SPEC-XXX] 相关功能（如果有）

---

## 分析元数据

| 属性 | 值 |
|------|-----|
| **分析者** | [AI 助手 / 人员名称] |
| **分析日期** | YYYY-MM-DD |
| **工具/方法** | `/reverse-spec` 命令 |
| **代码版本** | Git commit hash 或版本 |
| **分析文件数** | N 个文件 |
| **代码行数** | N 行 |

### 确定性摘要

| 确定性等级 | 数量 | 百分比 |
|-----------|------|--------|
| [已确认] | N | X% |
| [推断] | N | X% |
| [未知] | N | X% |

---

## 版本历史

| 版本 | 日期 | 变更 | 作者 |
|------|------|------|------|
| 1.0.0 | YYYY-MM-DD | 初始反向工程规格 | [名称] |

---

## 附录：原始分析数据

<details>
<summary>点击展开代码分析输出</summary>

```
<!-- 在此贴上原始分析输出供参考 -->
```

</details>
