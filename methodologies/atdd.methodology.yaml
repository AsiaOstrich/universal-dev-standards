# ATDD - Acceptance Test-Driven Development Methodology
# Version: 1.0.0
# Based on: skills/tdd-assistant/tdd-workflow.md (ATDD section)

$schema: "./methodology-schema.json"
id: atdd
name: Acceptance Test-Driven Development
nameZh: é©—æ”¶æ¸¬è©¦é©…å‹•é–‹ç™¼
version: 1.0.0
description: Collaborative approach where acceptance criteria are defined before development, and acceptance tests drive the implementation.
descriptionZh: åœ¨é–‹ç™¼å‰å®šç¾©é©—æ”¶æ¢ä»¶çš„å”ä½œæ–¹æ³•ï¼Œç”±é©—æ”¶æ¸¬è©¦é©…å‹•å¯¦ä½œã€‚
status: experimental
statusNote: "This methodology system will be redesigned in v4.0"
statusNoteZh: "æ­¤æ–¹æ³•è«–ç³»çµ±å°‡åœ¨ v4.0 ä¸­é‡æ–°è¨­è¨ˆ"

phases:
  - id: specification-workshop
    name: Specification Workshop
    nameZh: è¦æ ¼å·¥ä½œåŠ
    description: Collaborative session to define acceptance criteria with concrete examples
    descriptionZh: å”ä½œæœƒè­°ä»¥å…·é«”ç¯„ä¾‹å®šç¾©é©—æ”¶æ¢ä»¶
    duration: "30-60 minutes"
    emoji: "\U0001F91D"
    checklist:
      - id: po-presents
        text: Product Owner presents user story
        textZh: ç”¢å“è² è²¬äººå±•ç¤ºä½¿ç”¨è€…æ•…äº‹
        required: true
      - id: team-questions
        text: Team asks clarifying questions
        textZh: åœ˜éšŠæå‡ºæ¾„æ¸…å•é¡Œ
        required: true
      - id: ac-defined-together
        text: Acceptance criteria defined together
        textZh: å…±åŒå®šç¾©é©—æ”¶æ¢ä»¶
        required: true
      - id: examples-for-each-ac
        text: Concrete examples written for each AC
        textZh: ç‚ºæ¯å€‹é©—æ”¶æ¢ä»¶æ’°å¯«å…·é«”ç¯„ä¾‹
        required: true
      - id: edge-cases-discussed
        text: Edge cases and error scenarios discussed
        textZh: å·²è¨è«–é‚Šç•Œæƒ…æ³å’ŒéŒ¯èª¤æƒ…å¢ƒ
        required: false
    triggers:
      entry:
        - condition: new_user_story
        - condition: user_invokes_atdd_command
      exit:
        - condition: acceptance_criteria_defined
          nextPhase: distillation
    guidance:
      prompt: |
        ## ATDD Specification Workshop

        Defining acceptance criteria for: {{feature_description}}

        **Goal**: Collaboratively define what "done" means with concrete examples.

        ### Checklist
        {{checklist | format_checklist}}

        ### User Story Template
        ```markdown
        ## User Story

        **As a** [role]
        **I want** [feature]
        **So that** [benefit]

        ## Acceptance Criteria

        ### AC-1: [Criterion name]
        **Given** [precondition]
        **When** [action]
        **Then** [expected result]

        ### AC-2: [Criterion name]
        **Given** [precondition]
        **When** [action]
        **Then** [expected result]

        ## Out of Scope
        - [Things explicitly not included]

        ## Technical Notes
        - [Implementation hints, constraints]
        ```

        ### Workshop Questions
        1. What is the happy path?
        2. What could go wrong?
        3. What are the boundary conditions?
        4. What happens in error cases?

        Let's start with the happy path acceptance criteria.
      promptZh: |
        ## ATDD è¦æ ¼å·¥ä½œåŠ

        ç‚º {{feature_description}} å®šç¾©é©—æ”¶æ¢ä»¶

        **ç›®æ¨™**ï¼šå”ä½œå®šç¾©ã€Œå®Œæˆã€çš„å«ç¾©ï¼Œä¸¦æä¾›å…·é«”ç¯„ä¾‹ã€‚

        ### æª¢æŸ¥æ¸…å–®
        {{checklist | format_checklist}}

        ### ä½¿ç”¨è€…æ•…äº‹æ¨¡æ¿
        ```markdown
        ## ä½¿ç”¨è€…æ•…äº‹

        **ä½œç‚º** [è§’è‰²]
        **æˆ‘æƒ³è¦** [åŠŸèƒ½]
        **ä»¥ä¾¿** [å¥½è™•]

        ## é©—æ”¶æ¢ä»¶

        ### AC-1: [æ¢ä»¶åç¨±]
        **Given** [å‰ç½®æ¢ä»¶]
        **When** [å‹•ä½œ]
        **Then** [é æœŸçµæœ]

        ### AC-2: [æ¢ä»¶åç¨±]
        **Given** [å‰ç½®æ¢ä»¶]
        **When** [å‹•ä½œ]
        **Then** [é æœŸçµæœ]

        ## ç¯„åœå¤–
        - [æ˜ç¢ºæ’é™¤çš„äº‹é …]

        ## æŠ€è¡“å‚™è¨»
        - [å¯¦ä½œæç¤ºã€é™åˆ¶]
        ```

        ### å·¥ä½œåŠå•é¡Œ
        1. å¿«æ¨‚è·¯å¾‘æ˜¯ä»€éº¼ï¼Ÿ
        2. ä»€éº¼å¯èƒ½å‡ºéŒ¯ï¼Ÿ
        3. é‚Šç•Œæ¢ä»¶æ˜¯ä»€éº¼ï¼Ÿ
        4. éŒ¯èª¤æƒ…æ³æœƒç™¼ç”Ÿä»€éº¼ï¼Ÿ

        è®“æˆ‘å€‘å¾å¿«æ¨‚è·¯å¾‘çš„é©—æ”¶æ¢ä»¶é–‹å§‹ã€‚
    reminders:
      - trigger: "time_elapsed > 60min"
        message: "Workshop running long. Consider deferring some ACs to later stories."
        messageZh: "å·¥ä½œåŠæ™‚é–“éé•·ã€‚è€ƒæ…®å°‡éƒ¨åˆ†é©—æ”¶æ¢ä»¶æ¨é²åˆ°å¾ŒçºŒæ•…äº‹ã€‚"

  - id: distillation
    name: Distillation
    nameZh: æç…‰
    description: Convert examples to executable acceptance tests
    descriptionZh: å°‡ç¯„ä¾‹è½‰æ›ç‚ºå¯åŸ·è¡Œçš„é©—æ”¶æ¸¬è©¦
    duration: "30-60 minutes"
    emoji: "\U0001F9EA"
    checklist:
      - id: examples-to-tests
        text: Examples converted to executable tests
        textZh: ç¯„ä¾‹å·²è½‰æ›ç‚ºå¯åŸ·è¡Œæ¸¬è©¦
        required: true
      - id: ambiguity-removed
        text: Ambiguity removed from tests
        textZh: æ¸¬è©¦ä¸­çš„æ­§ç¾©å·²æ¶ˆé™¤
        required: true
      - id: testable-format
        text: Tests in executable format (Gherkin, FitNesse, etc.)
        textZh: æ¸¬è©¦ç‚ºå¯åŸ·è¡Œæ ¼å¼ï¼ˆGherkinã€FitNesse ç­‰ï¼‰
        required: true
      - id: po-signoff
        text: Product Owner signs off on tests
        textZh: ç”¢å“è² è²¬äººç°½æ ¸æ¸¬è©¦
        required: true
    triggers:
      entry:
        - condition: acceptance_criteria_defined
          fromPhase: specification-workshop
      exit:
        - condition: acceptance_tests_ready
          nextPhase: development
    guidance:
      prompt: |
        ## ATDD Distillation Phase

        Converting acceptance criteria to executable tests.

        **Goal**: Create unambiguous, executable acceptance tests.

        ### Checklist
        {{checklist | format_checklist}}

        ### Test Format Options
        | Tool | Format | Best For |
        |------|--------|----------|
        | Cucumber | Gherkin | BDD-style scenarios |
        | FitNesse | Wiki tables | Business-readable tests |
        | Robot Framework | Keyword-driven | Complex workflows |
        | Custom | Code | Full control |

        ### Example: Gherkin Format
        ```gherkin
        Feature: User Login

          Scenario: Successful login with valid credentials
            Given I am on the login page
            And I have a valid user account
            When I enter my email and password
            And I click the login button
            Then I should be redirected to the dashboard
            And I should see a welcome message
        ```

        ### Distillation Questions
        - Is each test unambiguous?
        - Can this test be automated?
        - Does the PO agree this represents the requirement?

        Let's convert the first acceptance criterion to an executable test.
      promptZh: |
        ## ATDD æç…‰éšæ®µ

        å°‡é©—æ”¶æ¢ä»¶è½‰æ›ç‚ºå¯åŸ·è¡Œæ¸¬è©¦ã€‚

        **ç›®æ¨™**ï¼šå»ºç«‹ç„¡æ­§ç¾©ã€å¯åŸ·è¡Œçš„é©—æ”¶æ¸¬è©¦ã€‚

        ### æª¢æŸ¥æ¸…å–®
        {{checklist | format_checklist}}

        ### æ¸¬è©¦æ ¼å¼é¸é …
        | å·¥å…· | æ ¼å¼ | æœ€é©åˆ |
        |------|------|--------|
        | Cucumber | Gherkin | BDD é¢¨æ ¼æƒ…å¢ƒ |
        | FitNesse | Wiki è¡¨æ ¼ | æ¥­å‹™å¯è®€æ¸¬è©¦ |
        | Robot Framework | é—œéµå­—é©…å‹• | è¤‡é›œå·¥ä½œæµ |
        | è‡ªè¨‚ | ç¨‹å¼ç¢¼ | å®Œå…¨æ§åˆ¶ |

        ### ç¯„ä¾‹ï¼šGherkin æ ¼å¼
        ```gherkin
        Feature: ä½¿ç”¨è€…ç™»å…¥

          Scenario: ä½¿ç”¨æœ‰æ•ˆæ†‘è­‰æˆåŠŸç™»å…¥
            Given æˆ‘åœ¨ç™»å…¥é é¢
            And æˆ‘æœ‰æœ‰æ•ˆçš„ä½¿ç”¨è€…å¸³è™Ÿ
            When æˆ‘è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼
            And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
            Then æˆ‘æ‡‰è©²è¢«é‡æ–°å°å‘åˆ°å„€è¡¨æ¿
            And æˆ‘æ‡‰è©²çœ‹åˆ°æ­¡è¿è¨Šæ¯
        ```

        ### æç…‰å•é¡Œ
        - æ¯å€‹æ¸¬è©¦æ˜¯å¦ç„¡æ­§ç¾©ï¼Ÿ
        - é€™å€‹æ¸¬è©¦å¯ä»¥è‡ªå‹•åŒ–å—ï¼Ÿ
        - ç”¢å“è² è²¬äººåŒæ„é€™ä»£è¡¨éœ€æ±‚å—ï¼Ÿ

        è®“æˆ‘å€‘å°‡ç¬¬ä¸€å€‹é©—æ”¶æ¢ä»¶è½‰æ›ç‚ºå¯åŸ·è¡Œæ¸¬è©¦ã€‚
    reminders:
      - trigger: "time_elapsed > 60min"
        message: "Distillation taking long. Consider simplifying test format."
        messageZh: "æç…‰è€—æ™‚éé•·ã€‚è€ƒæ…®ç°¡åŒ–æ¸¬è©¦æ ¼å¼ã€‚"

  - id: development
    name: Development
    nameZh: é–‹ç™¼
    description: Implement feature driven by acceptance tests
    descriptionZh: ç”±é©—æ”¶æ¸¬è©¦é©…å‹•å¯¦ä½œåŠŸèƒ½
    duration: "Variable"
    emoji: "\U0001F4BB"
    checklist:
      - id: acceptance-tests-red
        text: Acceptance tests initially fail (RED)
        textZh: é©—æ”¶æ¸¬è©¦æœ€åˆå¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
        required: true
      - id: use-bdd-tdd
        text: Use BDD for feature tests, TDD for unit tests
        textZh: åŠŸèƒ½æ¸¬è©¦ç”¨ BDDï¼Œå–®å…ƒæ¸¬è©¦ç”¨ TDD
        required: false
      - id: incremental-progress
        text: Make incremental progress toward passing ATs
        textZh: é€æ­¥æœé€šéé©—æ”¶æ¸¬è©¦å‰é€²
        required: true
      - id: all-ats-pass
        text: All acceptance tests pass (GREEN)
        textZh: æ‰€æœ‰é©—æ”¶æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰
        required: true
      - id: code-refactored
        text: Code refactored and clean
        textZh: ç¨‹å¼ç¢¼å·²é‡æ§‹ä¸¦ä¹¾æ·¨
        required: true
    triggers:
      entry:
        - condition: acceptance_tests_ready
          fromPhase: distillation
      exit:
        - condition: all_acceptance_tests_pass
          nextPhase: demo
    guidance:
      prompt: |
        ## ATDD Development Phase

        Implementing feature to pass acceptance tests.

        **Goal**: Make all acceptance tests pass through implementation.

        ### Checklist
        {{checklist | format_checklist}}

        ### Test Pyramid Mapping
        | Acceptance Criteria | Test Level | Tool |
        |---------------------|------------|------|
        | User-facing behavior | Acceptance | FitNesse, Cucumber |
        | Feature behavior | BDD | Cucumber, SpecFlow |
        | Unit logic | TDD | Jest, xUnit |
        | API contract | Integration | Supertest, REST Assured |

        ### Development Flow
        ```
        Acceptance Test (RED)
              â”‚
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TDD Cycle       â”‚
        â”‚ (Unit Tests)    â”‚â—„â”€â”€â”€â”€â”€â”€â”
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                 â”‚                â”‚
                 â–¼                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        â”‚ Run Acceptance  â”‚       â”‚
        â”‚ Test            â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Still RED
                 â”‚
                 â–¼ GREEN
        Acceptance Test (GREEN)
        ```

        Run the acceptance tests first to see them fail.
      promptZh: |
        ## ATDD é–‹ç™¼éšæ®µ

        å¯¦ä½œåŠŸèƒ½ä»¥é€šéé©—æ”¶æ¸¬è©¦ã€‚

        **ç›®æ¨™**ï¼šé€éå¯¦ä½œä½¿æ‰€æœ‰é©—æ”¶æ¸¬è©¦é€šéã€‚

        ### æª¢æŸ¥æ¸…å–®
        {{checklist | format_checklist}}

        ### æ¸¬è©¦é‡‘å­—å¡”å°æ‡‰
        | é©—æ”¶æ¢ä»¶ | æ¸¬è©¦å±¤ç´š | å·¥å…· |
        |----------|----------|------|
        | ä½¿ç”¨è€…é¢å‘è¡Œç‚º | é©—æ”¶ | FitNesseã€Cucumber |
        | åŠŸèƒ½è¡Œç‚º | BDD | Cucumberã€SpecFlow |
        | å–®å…ƒé‚è¼¯ | TDD | Jestã€xUnit |
        | API å¥‘ç´„ | æ•´åˆ | Supertestã€REST Assured |

        ### é–‹ç™¼æµç¨‹
        ```
        é©—æ”¶æ¸¬è©¦ï¼ˆç´…ç‡ˆï¼‰
              â”‚
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TDD å¾ªç’°        â”‚
        â”‚ï¼ˆå–®å…ƒæ¸¬è©¦ï¼‰     â”‚â—„â”€â”€â”€â”€â”€â”€â”
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                 â”‚                â”‚
                 â–¼                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        â”‚ åŸ·è¡Œé©—æ”¶æ¸¬è©¦    â”‚       â”‚
        â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ä»æ˜¯ç´…ç‡ˆ
                 â”‚
                 â–¼ ç¶ ç‡ˆ
        é©—æ”¶æ¸¬è©¦ï¼ˆç¶ ç‡ˆï¼‰
        ```

        å…ˆåŸ·è¡Œé©—æ”¶æ¸¬è©¦çœ‹å®ƒå€‘å¤±æ•—ã€‚
    reminders:
      - trigger: "acceptance_test_failing > 2hours"
        message: "Acceptance test failing for 2+ hours. Consider breaking into smaller steps."
        messageZh: "é©—æ”¶æ¸¬è©¦å¤±æ•—è¶…é 2 å°æ™‚ã€‚è€ƒæ…®æ‹†åˆ†æˆæ›´å°çš„æ­¥é©Ÿã€‚"

  - id: demo
    name: Demo
    nameZh: å±•ç¤º
    description: Demonstrate working feature to stakeholders
    descriptionZh: å‘åˆ©å®³é—œä¿‚äººå±•ç¤ºå¯é‹ä½œçš„åŠŸèƒ½
    duration: "15-30 minutes"
    emoji: "\U0001F3AC"
    checklist:
      - id: all-ats-passing
        text: All acceptance tests are passing
        textZh: æ‰€æœ‰é©—æ”¶æ¸¬è©¦éƒ½é€šé
        required: true
      - id: demo-prepared
        text: Demo environment prepared
        textZh: å±•ç¤ºç’°å¢ƒå·²æº–å‚™
        required: true
      - id: stakeholders-present
        text: Key stakeholders present
        textZh: é—œéµåˆ©å®³é—œä¿‚äººåœ¨å ´
        required: true
      - id: po-validates
        text: Product Owner validates functionality
        textZh: ç”¢å“è² è²¬äººé©—è­‰åŠŸèƒ½
        required: true
      - id: accepted-or-refined
        text: Story accepted or criteria refined
        textZh: æ•…äº‹è¢«æ¥å—æˆ–æ¢ä»¶è¢«ç²¾ç…‰
        required: true
    triggers:
      entry:
        - condition: all_acceptance_tests_pass
          fromPhase: development
      exit:
        - condition: story_accepted
          nextPhase: done
        - condition: criteria_refined
          nextPhase: specification-workshop
    guidance:
      prompt: |
        ## ATDD Demo Phase

        Demonstrating completed feature to stakeholders.

        **Goal**: Get formal acceptance from Product Owner.

        ### Checklist
        {{checklist | format_checklist}}

        ### Demo Structure
        1. **Context** (1 min)
           - Remind stakeholders of the user story
           - Show acceptance criteria

        2. **Show Tests** (2 min)
           - Run acceptance tests live
           - Show all passing

        3. **Feature Demo** (5-10 min)
           - Walk through each acceptance criterion
           - Show working functionality
           - Demonstrate edge cases if tested

        4. **Feedback** (5 min)
           - Gather feedback
           - Clarify any questions
           - Get formal acceptance

        ### Possible Outcomes
        - âœ… **Accepted**: Story complete, move to done
        - ğŸ”„ **Refinement needed**: Return to workshop with new learnings
        - âŒ **Not accepted**: Identify gaps, iterate

        Ready to demo?
      promptZh: |
        ## ATDD å±•ç¤ºéšæ®µ

        å‘åˆ©å®³é—œä¿‚äººå±•ç¤ºå·²å®Œæˆçš„åŠŸèƒ½ã€‚

        **ç›®æ¨™**ï¼šå¾ç”¢å“è² è²¬äººå–å¾—æ­£å¼æ¥å—ã€‚

        ### æª¢æŸ¥æ¸…å–®
        {{checklist | format_checklist}}

        ### å±•ç¤ºçµæ§‹
        1. **èƒŒæ™¯** (1 åˆ†é˜)
           - æé†’åˆ©å®³é—œä¿‚äººä½¿ç”¨è€…æ•…äº‹
           - å±•ç¤ºé©—æ”¶æ¢ä»¶

        2. **å±•ç¤ºæ¸¬è©¦** (2 åˆ†é˜)
           - ç¾å ´åŸ·è¡Œé©—æ”¶æ¸¬è©¦
           - å±•ç¤ºå…¨éƒ¨é€šé

        3. **åŠŸèƒ½å±•ç¤º** (5-10 åˆ†é˜)
           - èµ°éæ¯å€‹é©—æ”¶æ¢ä»¶
           - å±•ç¤ºå¯é‹ä½œçš„åŠŸèƒ½
           - å¦‚æœ‰æ¸¬è©¦å±•ç¤ºé‚Šç•Œæƒ…æ³

        4. **å›é¥‹** (5 åˆ†é˜)
           - æ”¶é›†å›é¥‹
           - æ¾„æ¸…ä»»ä½•å•é¡Œ
           - å–å¾—æ­£å¼æ¥å—

        ### å¯èƒ½çµæœ
        - âœ… **æ¥å—**ï¼šæ•…äº‹å®Œæˆï¼Œç§»è‡³å®Œæˆ
        - ğŸ”„ **éœ€è¦ç²¾ç…‰**ï¼šå¸¶è‘—æ–°å­¸ç¿’è¿”å›å·¥ä½œåŠ
        - âŒ **ä¸æ¥å—**ï¼šè­˜åˆ¥å·®è·ï¼Œè¿­ä»£

        æº–å‚™å¥½å±•ç¤ºäº†å—ï¼Ÿ
    reminders: []

  - id: done
    name: Done
    nameZh: å®Œæˆ
    description: Story accepted and complete
    descriptionZh: æ•…äº‹å·²æ¥å—ä¸¦å®Œæˆ
    duration: ""
    emoji: "\u2705"
    checklist:
      - id: all-ats-pass
        text: All acceptance tests pass
        textZh: æ‰€æœ‰é©—æ”¶æ¸¬è©¦é€šé
        required: true
      - id: po-accepted
        text: Product Owner accepted
        textZh: ç”¢å“è² è²¬äººå·²æ¥å—
        required: true
      - id: code-merged
        text: Code merged to main branch
        textZh: ç¨‹å¼ç¢¼å·²åˆä½µåˆ°ä¸»åˆ†æ”¯
        required: true
    triggers:
      entry:
        - condition: story_accepted
          fromPhase: demo
      exit: []
    guidance:
      prompt: |
        ## ATDD Complete

        User story accepted and complete.

        ### Summary
        - All acceptance tests passing
        - Product Owner validated functionality
        - Feature ready for release

        ### Next Steps
        1. Merge code to main branch
        2. Update documentation if needed
        3. Plan next story

        Congratulations! Story complete.
      promptZh: |
        ## ATDD å®Œæˆ

        ä½¿ç”¨è€…æ•…äº‹å·²æ¥å—ä¸¦å®Œæˆã€‚

        ### æ‘˜è¦
        - æ‰€æœ‰é©—æ”¶æ¸¬è©¦é€šé
        - ç”¢å“è² è²¬äººå·²é©—è­‰åŠŸèƒ½
        - åŠŸèƒ½æº–å‚™ç™¼å¸ƒ

        ### ä¸‹ä¸€æ­¥
        1. åˆä½µç¨‹å¼ç¢¼åˆ°ä¸»åˆ†æ”¯
        2. å¦‚éœ€è¦æ›´æ–°æ–‡ä»¶
        3. è¦åŠƒä¸‹ä¸€å€‹æ•…äº‹

        æ­å–œï¼æ•…äº‹å®Œæˆã€‚
    reminders: []

checkpoints:
  - id: phase-complete
    trigger: phase_transition
    intensity: suggest
    action: |
      Phase {{current_phase}} completed.

      ATDD Progress: {{current_phase_index}}/5 phases complete
      User Story: {{story_title}}

      [1] Continue to next phase  [2] View story status  [3] Commit changes
    actionZh: |
      éšæ®µ {{current_phase}} å®Œæˆã€‚

      ATDD é€²åº¦ï¼š{{current_phase_index}}/5 å€‹éšæ®µå®Œæˆ
      ä½¿ç”¨è€…æ•…äº‹ï¼š{{story_title}}

      [1] ç¹¼çºŒä¸‹ä¸€éšæ®µ  [2] æª¢è¦–æ•…äº‹ç‹€æ…‹  [3] æäº¤è®Šæ›´

  - id: at-failing-long
    trigger: "acceptance_test_failing > 4hours"
    intensity: warning
    action: |
      Warning: Acceptance test failing for 4+ hours.

      Consider:
      - Breaking into smaller acceptance criteria
      - Discussing with Product Owner
      - Simplifying the test
    actionZh: |
      è­¦å‘Šï¼šé©—æ”¶æ¸¬è©¦å¤±æ•—è¶…é 4 å°æ™‚ã€‚

      è€ƒæ…®ï¼š
      - æ‹†åˆ†æˆæ›´å°çš„é©—æ”¶æ¢ä»¶
      - èˆ‡ç”¢å“è² è²¬äººè¨è«–
      - ç°¡åŒ–æ¸¬è©¦

commands:
  - name: atdd
    description: Start ATDD workflow for a user story
    descriptionZh: ç‚ºä½¿ç”¨è€…æ•…äº‹å•Ÿå‹• ATDD å·¥ä½œæµ
    usage: "/atdd [user story]"
    action: start_workflow
  - name: atdd-status
    description: Show current ATDD phase and progress
    descriptionZh: é¡¯ç¤ºç•¶å‰ ATDD éšæ®µå’Œé€²åº¦
    usage: "/atdd-status"
    action: show_status
  - name: atdd-ac
    description: Define acceptance criteria interactively
    descriptionZh: äº’å‹•å¼å®šç¾©é©—æ”¶æ¢ä»¶
    usage: "/atdd-ac"
    action: start_workflow

integrations:
  tdd:
    enabled: true
    mapping:
      development_phase: use_tdd_for_units
  bdd:
    enabled: true
    mapping:
      distillation_phase: use_gherkin_format
  checkin-standards:
    enabled: true
    mapping:
      phase_complete: suggest_commit
  code-review:
    enabled: true
    additionalChecks:
      - "All acceptance criteria have tests"
      - "PO sign-off documented"
      - "No missing edge cases"

aiGuidance:
  autoDetect: true
  proactiveReminders: true
  contextKeywords:
    - "ATDD"
    - "acceptance test"
    - "acceptance criteria"
    - "user story"
    - "product owner"
    - "acceptance driven"
    - "given when then"
