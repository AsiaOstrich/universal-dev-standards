# Custom Methodology Template
# è‡ªè¨‚æ–¹æ³•è«–æ¨¡æ¿
#
# Use this template to create your own development methodology.
# Save to: .standards/methodologies/<your-id>.methodology.yaml
#
# ä½¿ç”¨æ­¤æ¨¡æ¿å»ºç«‹æ‚¨è‡ªå·±çš„é–‹ç™¼æ–¹æ³•è«–ã€‚
# å„²å­˜åˆ°: .standards/methodologies/<your-id>.methodology.yaml

$schema: "https://raw.githubusercontent.com/AsiaOstrich/universal-dev-standards/main/methodologies/methodology-schema.json"

# === BASIC INFORMATION | åŸºæœ¬è³‡è¨Š ===
id: my-workflow                    # Unique ID (lowercase, hyphens) | å”¯ä¸€è­˜åˆ¥ç¢¼
name: My Custom Workflow           # Display name | é¡¯ç¤ºåç¨±
nameZh: æˆ‘çš„è‡ªè¨‚å·¥ä½œæµ               # Chinese name (optional) | ä¸­æ–‡åç¨±ï¼ˆé¸å¡«ï¼‰
version: 1.0.0                     # Semantic version | èªæ„åŒ–ç‰ˆæœ¬
description: A custom development workflow for our team
descriptionZh: æˆ‘å€‘åœ˜éšŠçš„è‡ªè¨‚é–‹ç™¼å·¥ä½œæµ

# === PHASES | éšæ®µ ===
# Define your development phases. Each phase represents a distinct stage.
# å®šç¾©æ‚¨çš„é–‹ç™¼éšæ®µã€‚æ¯å€‹éšæ®µä»£è¡¨ä¸€å€‹æ˜ç¢ºçš„é–‹ç™¼ç‹€æ…‹ã€‚
phases:
  # --- Phase 1: Planning ---
  - id: plan
    name: Planning
    nameZh: è¦åŠƒ
    description: Plan the implementation approach
    descriptionZh: è¦åŠƒå¯¦ä½œæ–¹æ³•
    duration: "15-30 minutes"
    emoji: "ğŸ“‹"

    # Checklist items for this phase
    # æ­¤éšæ®µçš„æª¢æŸ¥æ¸…å–®é …ç›®
    checklist:
      - id: requirements-clear
        text: Requirements are clearly understood
        textZh: éœ€æ±‚å·²æ¸…æ¥šç†è§£
        required: true              # Must complete to proceed | å¿…é ˆå®Œæˆæ‰èƒ½ç¹¼çºŒ
      - id: design-reviewed
        text: Design approach reviewed with team
        textZh: è¨­è¨ˆæ–¹æ³•å·²èˆ‡åœ˜éšŠå¯©æŸ¥
        required: false             # Optional item | é¸å¡«é …ç›®

    # Phase transition triggers
    # éšæ®µè½‰æ›è§¸ç™¼æ¢ä»¶
    triggers:
      entry:
        - condition: feature_start  # When to enter this phase | ä½•æ™‚é€²å…¥æ­¤éšæ®µ
      exit:
        - condition: user_confirms_plan_complete
          nextPhase: implement      # Where to go next | ä¸‹ä¸€å€‹éšæ®µ

    # AI guidance for this phase
    # æ­¤éšæ®µçš„ AI å¼•å°æç¤º
    guidance:
      prompt: |
        ## Planning Phase

        Before implementation, ensure:
        {{ checklist | format_checklist }}

        Consider:
        - What is the expected outcome?
        - Are there any dependencies?
        - What could go wrong?
      promptZh: |
        ## è¦åŠƒéšæ®µ

        åœ¨å¯¦ä½œå‰ï¼Œç¢ºä¿ï¼š
        {{ checklist | format_checklist }}

        è€ƒæ…®ï¼š
        - é æœŸçµæœæ˜¯ä»€éº¼ï¼Ÿ
        - æœ‰ä»»ä½•ç›¸ä¾æ€§å—ï¼Ÿ
        - å¯èƒ½å‡ºä»€éº¼å•é¡Œï¼Ÿ

  # --- Phase 2: Implementation ---
  - id: implement
    name: Implementation
    nameZh: å¯¦ä½œ
    description: Write the code
    descriptionZh: æ’°å¯«ç¨‹å¼ç¢¼
    duration: "Variable"
    emoji: "ğŸ’»"

    checklist:
      - id: follows-patterns
        text: Code follows team patterns
        textZh: ç¨‹å¼ç¢¼éµå¾ªåœ˜éšŠæ…£ä¾‹
        required: true
      - id: tests-written
        text: Tests written alongside code
        textZh: æ¸¬è©¦èˆ‡ç¨‹å¼ç¢¼åŒæ­¥æ’°å¯«
        required: true
      - id: no-debug-code
        text: No debugging code left behind
        textZh: ç„¡é™¤éŒ¯ç¨‹å¼ç¢¼æ®˜ç•™
        required: true

    triggers:
      entry:
        - condition: plan_complete
      exit:
        - condition: implementation_complete
          nextPhase: review

    guidance:
      prompt: |
        ## Implementation Phase

        Writing code for: {{feature_description}}

        {{ checklist | format_checklist }}

        Remember:
        - Keep commits small and focused
        - Write tests as you go

  # --- Phase 3: Review ---
  - id: review
    name: Review
    nameZh: å¯©æŸ¥
    description: Self-review and prepare for PR
    descriptionZh: è‡ªæˆ‘å¯©æŸ¥ä¸¦æº–å‚™ PR
    duration: "15-30 minutes"
    emoji: "ğŸ‘€"

    checklist:
      - id: self-reviewed
        text: Code self-reviewed
        textZh: ç¨‹å¼ç¢¼å·²è‡ªæˆ‘å¯©æŸ¥
        required: true
      - id: tests-pass
        text: All tests pass
        textZh: æ‰€æœ‰æ¸¬è©¦é€šé
        required: true
      - id: docs-updated
        text: Documentation updated
        textZh: æ–‡ä»¶å·²æ›´æ–°
        required: false

    triggers:
      entry:
        - condition: implementation_complete
      exit:
        - condition: ready_for_pr
          nextPhase: done

    guidance:
      prompt: |
        ## Review Phase

        Before marking as ready:
        {{ checklist | format_checklist }}

        Self-review questions:
        - Would I approve this if reviewing someone else's code?
        - Are edge cases handled?
        - Is the code easy to understand?

  # --- Phase 4: Done ---
  - id: done
    name: Done
    nameZh: å®Œæˆ
    description: Ready for PR
    descriptionZh: æº–å‚™æäº¤ PR
    emoji: "âœ…"
    checklist: []
    triggers:
      entry:
        - condition: ready_for_pr
      exit: []

# === CHECKPOINTS | æª¢æŸ¥é» ===
# Define automatic reminders and validation points
# å®šç¾©è‡ªå‹•æé†’å’Œé©—è­‰é»
checkpoints:
  - id: phase-transition
    trigger: phase_transition       # When a phase is completed
    intensity: suggest              # suggest | warn | block
    action: "Phase complete. Consider committing your changes."
    actionZh: "éšæ®µå®Œæˆã€‚è€ƒæ…®æäº¤æ‚¨çš„è®Šæ›´ã€‚"

  - id: large-changes
    trigger: lines_changed
    threshold: 200                  # Trigger after 200+ lines changed
    intensity: warn
    action: "You have 200+ uncommitted lines. Consider breaking into smaller commits."
    actionZh: "æ‚¨æœ‰è¶…é 200 è¡Œæœªæäº¤çš„è®Šæ›´ã€‚è€ƒæ…®æ‹†åˆ†ç‚ºè¼ƒå°çš„æäº¤ã€‚"

# === COMMANDS | å‘½ä»¤ ===
# Define custom slash commands for this methodology (optional)
# ç‚ºæ­¤æ–¹æ³•è«–å®šç¾©è‡ªè¨‚æ–œç·šå‘½ä»¤ï¼ˆé¸å¡«ï¼‰
commands:
  - name: workflow
    description: Start custom workflow
    descriptionZh: å•Ÿå‹•è‡ªè¨‚å·¥ä½œæµ
    usage: "/workflow [feature]"
    action: start_workflow

# === AI GUIDANCE SETTINGS | AI å¼•å°è¨­å®š ===
aiGuidance:
  autoDetect: true                  # Detect methodology from context
  proactiveReminders: true          # Show phase reminders proactively
  contextKeywords:                  # Keywords that trigger this methodology
    - "team workflow"
    - "our process"
    - "custom workflow"
